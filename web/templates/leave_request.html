<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>请假申请</title>
</head>
<body>
    <h1>请假申请</h1>
    <form method="post">
        {% csrf_token %}
        <label for="student">选择学生：</label>
        <select name="student" id="student">
            {% for child in parent_children %}
                <option value="{{ child.id }}">{{ child.name }}</option>
            {% endfor %}
        </select><br><br>
        <label for="start_date">开始日期：</label>
        <input type="date" name="start_date" id="start_date"><br><br>
        <label for="start_time">开始时间：</label>
        <input type="time" name="start_time" id="start_time"><br><br>
        <label for="end_date">结束日期：</label>
        <input type="date" name="end_date" id="end_date"><br><br>
        <label for="end_time">结束时间：</label>
        <input type="time" name="end_time" id="end_time"><br><br>
        <label for="reason">请假原因：</label><br>
        <textarea name="reason" id="reason" cols="30" rows="5"></textarea><br><br>
        <button type="submit">提交</button>
    </form>

    <h2>孩子的请假记录：</h2>
    <table border="1">
        <tr>
            <th>学生姓名</th>
            <th>开始日期</th>
            <th>结束日期</th>
            <th>请假原因</th>
            <th>状态</th>
        </tr>
        {% for child in parent_children %}
            {% for record in leave_records %}
                {% if record.student == child %}
                    <tr>
                        <td>{{ child.name }}</td>
                        <td>{{ record.start_date }}</td>
                        <td>{{ record.end_date }}</td>
                        <td>{{ record.reason }}</td>
                        <td>{{ record.status }}</td>
                    </tr>
                {% endif %}
            {% endfor %}
        {% endfor %}
    </table>
</body>
</html>
